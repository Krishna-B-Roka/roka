<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Valentine's Day, My Love</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&family=Tenor+Sans&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --cream: #f9f3ee;
      --blush: #e8c4b8;
      --rose: #c0616a;
      --deep: #7a2230;
      --gold: #c8a97e;
      --dark: #1a0a0e;
      --text: #3d1a20;
    }

    html, body {
      width: 100%; height: 100%;
      background: var(--cream);
      color: var(--text);
      font-family: 'Cormorant Garamond', serif;
      overflow-x: hidden;
    }

    /* === CANVAS for petals === */
    #petal-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    /* === ENVELOPE INTRO === */
    #envelope-scene {
      position: fixed;
      inset: 0;
      z-index: 100;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: radial-gradient(ellipse at 50% 40%, #fce9e1 0%, #f0d4cc 40%, #e0b5a8 100%);
      transition: opacity 0.9s ease, transform 0.9s ease;
    }
    #envelope-scene.hidden {
      opacity: 0;
      pointer-events: none;
      transform: scale(1.04);
    }

    .envelope-wrap {
      position: relative;
      width: 260px;
      cursor: pointer;
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-12px); }
    }

    .envelope-body {
      width: 260px;
      height: 180px;
      background: linear-gradient(145deg, #fff4ef, #fce4d8);
      border-radius: 6px 6px 14px 14px;
      box-shadow: 0 20px 60px rgba(122,34,48,0.22), 0 4px 16px rgba(192,97,106,0.18);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(200,169,126,0.45);
    }

    .envelope-flap {
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 0;
      border-left: 130px solid transparent;
      border-right: 130px solid transparent;
      border-top: 100px solid #f5cfc3;
      transform-origin: top center;
      transition: transform 0.6s cubic-bezier(0.4,0,0.2,1);
      z-index: 2;
      filter: drop-shadow(0 4px 8px rgba(122,34,48,0.12));
    }
    .envelope-wrap:hover .envelope-flap {
      transform: rotateX(-180deg);
    }

    .envelope-bottom-left {
      position: absolute;
      bottom: 0; left: 0;
      width: 0; height: 0;
      border-bottom: 90px solid #eed4c8;
      border-right: 130px solid transparent;
    }
    .envelope-bottom-right {
      position: absolute;
      bottom: 0; right: 0;
      width: 0; height: 0;
      border-bottom: 90px solid #e8cbbd;
      border-left: 130px solid transparent;
    }

    .envelope-seal {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 44px; height: 44px;
      background: radial-gradient(circle, var(--rose), var(--deep));
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 22px;
      box-shadow: 0 2px 12px rgba(122,34,48,0.35);
      z-index: 3;
      transition: transform 0.3s ease;
    }
    .envelope-wrap:hover .envelope-seal {
      transform: translate(-50%, -50%) scale(0.85);
    }

    .open-hint {
      margin-top: 28px;
      font-family: 'Tenor Sans', sans-serif;
      font-size: 13px;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--deep);
      opacity: 0.7;
      animation: pulse-hint 2s ease-in-out infinite;
    }
    @keyframes pulse-hint {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 0.95; }
    }

    /* === MAIN CONTENT === */
    #main {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      opacity: 0;
      transition: opacity 1.1s ease 0.2s;
    }
    #main.visible { opacity: 1; }

    /* decorative line */
    .ornament {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      color: var(--gold);
      font-size: 18px;
    }
    .ornament::before, .ornament::after {
      content: '';
      display: block;
      width: 60px;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--gold));
    }
    .ornament::after {
      background: linear-gradient(90deg, var(--gold), transparent);
    }

    /* === HERO === */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 60px 30px;
      position: relative;
    }

    .hero-date {
      font-family: 'Tenor Sans', sans-serif;
      font-size: 11px;
      letter-spacing: 5px;
      text-transform: uppercase;
      color: var(--rose);
      margin-bottom: 32px;
      animation: fadeUp 1s ease 0.3s both;
    }

    .hero-title {
      font-size: clamp(48px, 10vw, 96px);
      font-weight: 300;
      line-height: 1.05;
      letter-spacing: -1px;
      color: var(--dark);
      margin-bottom: 10px;
      animation: fadeUp 1s ease 0.5s both;
    }
    .hero-title em {
      font-style: italic;
      color: var(--rose);
    }

    .hero-subtitle {
      font-size: clamp(18px, 4vw, 28px);
      font-weight: 300;
      font-style: italic;
      color: var(--deep);
      margin-bottom: 48px;
      animation: fadeUp 1s ease 0.7s both;
    }

    .hero-ornament {
      animation: fadeUp 1s ease 0.9s both;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(24px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* === LETTER SECTION === */
    .letter-section {
      max-width: 680px;
      margin: 0 auto;
      padding: 80px 40px;
    }

    .section-label {
      font-family: 'Tenor Sans', sans-serif;
      font-size: 10px;
      letter-spacing: 5px;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 40px;
      text-align: center;
    }

    .letter-card {
      background: #fff9f6;
      border: 1px solid rgba(200,169,126,0.3);
      border-radius: 3px;
      padding: 56px 52px;
      position: relative;
      box-shadow: 0 8px 48px rgba(122,34,48,0.08), 0 2px 12px rgba(192,97,106,0.08);
    }
    .letter-card::before {
      content: '';
      position: absolute;
      top: 10px; left: 10px; right: 10px; bottom: 10px;
      border: 1px solid rgba(200,169,126,0.15);
      border-radius: 2px;
      pointer-events: none;
    }

    .letter-card p {
      font-size: clamp(17px, 2.5vw, 21px);
      line-height: 1.85;
      color: var(--text);
      margin-bottom: 24px;
    }
    .letter-card p:last-of-type { margin-bottom: 0; }

    .letter-signature {
      margin-top: 40px;
      font-style: italic;
      font-size: 22px;
      color: var(--rose);
      text-align: right;
    }

    /* === REASONS === */
    .reasons-section {
      padding: 80px 30px;
      background: linear-gradient(180deg, transparent 0%, rgba(232,196,184,0.18) 30%, rgba(232,196,184,0.22) 70%, transparent 100%);
    }

    .reasons-grid {
      max-width: 860px;
      margin: 48px auto 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 28px;
    }

    .reason-card {
      background: #fff9f6;
      border: 1px solid rgba(200,169,126,0.25);
      padding: 34px 28px;
      text-align: center;
      border-radius: 2px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: default;
    }
    .reason-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px rgba(122,34,48,0.12);
    }
    .reason-number {
      font-family: 'Tenor Sans', sans-serif;
      font-size: 11px;
      letter-spacing: 3px;
      color: var(--gold);
      margin-bottom: 14px;
    }
    .reason-text {
      font-size: 17px;
      line-height: 1.65;
      font-style: italic;
      color: var(--text);
    }

    /* === CLOSING === */
    .closing-section {
      text-align: center;
      padding: 100px 40px;
    }
    .big-heart {
      font-size: 64px;
      animation: heartbeat 1.5s ease-in-out infinite;
      display: inline-block;
      margin-bottom: 28px;
    }
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      14% { transform: scale(1.15); }
      28% { transform: scale(1); }
      42% { transform: scale(1.1); }
      56% { transform: scale(1); }
    }
    .closing-text {
      font-size: clamp(24px, 5vw, 42px);
      font-weight: 300;
      color: var(--deep);
      font-style: italic;
      line-height: 1.4;
    }
    .closing-sub {
      margin-top: 20px;
      font-family: 'Tenor Sans', sans-serif;
      font-size: 11px;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--gold);
    }

    /* floating petals decorative divider */
    .divider {
      text-align: center;
      color: var(--blush);
      font-size: 22px;
      letter-spacing: 12px;
      margin: 20px 0;
    }

    /* === VALENTINE QUESTION === */
    .valentine-section {
      text-align: center;
      padding: 90px 40px 130px;
      position: relative;
    }
    .valentine-question {
      font-size: clamp(30px, 6vw, 58px);
      font-weight: 300;
      font-style: italic;
      color: var(--dark);
      margin-bottom: 16px;
      line-height: 1.2;
    }
    .valentine-question em { color: var(--rose); }
    .valentine-sub {
      font-family: 'Tenor Sans', sans-serif;
      font-size: 11px;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 56px;
    }
    .btn-group {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 32px;
      flex-wrap: wrap;
    }

    /* YES ‚Äî lush, warm, prominent */
    .btn-yes {
      font-family: 'Cormorant Garamond', serif;
      font-size: 24px;
      font-style: italic;
      font-weight: 600;
      padding: 18px 58px;
      background: linear-gradient(135deg, #c0616a 0%, #7a2230 100%);
      color: #fff9f6;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      letter-spacing: 1.5px;
      box-shadow:
        0 10px 40px rgba(122,34,48,0.35),
        0 2px 0 rgba(255,255,255,0.15) inset,
        0 -2px 0 rgba(0,0,0,0.15) inset;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      position: relative;
      z-index: 2;
    }
    .btn-yes::before {
      content: '‚ô•';
      margin-right: 10px;
      font-style: normal;
    }
    .btn-yes::after {
      content: '‚ô•';
      margin-left: 10px;
      font-style: normal;
    }
    .btn-yes:hover {
      transform: scale(1.07) translateY(-2px);
      box-shadow:
        0 18px 50px rgba(122,34,48,0.42),
        0 2px 0 rgba(255,255,255,0.15) inset;
    }
    .btn-yes:active { transform: scale(0.98); }

    /* NO ‚Äî minimal, grey, ghost ‚Äî doomed to flee */
    .btn-no {
      font-family: 'Tenor Sans', sans-serif;
      font-size: 14px;
      letter-spacing: 3px;
      text-transform: uppercase;
      padding: 14px 36px;
      background: transparent;
      color: #c9b8b8;
      border: 1.5px solid #ddd0d0;
      border-radius: 4px;
      cursor: not-allowed;
      position: fixed;
      z-index: 999;
      transition: left 0.12s cubic-bezier(0.25,0.46,0.45,0.94),
                  top  0.12s cubic-bezier(0.25,0.46,0.45,0.94),
                  opacity 0.2s ease;
      user-select: none;
      pointer-events: auto;
    }
    .btn-no:hover { background: transparent; }

    /* sad tooltip when No almost gets caught */
    #no-tooltip {
      position: fixed;
      z-index: 998;
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      font-size: 15px;
      color: var(--rose);
      background: #fff9f6;
      border: 1px solid rgba(200,169,126,0.3);
      border-radius: 6px;
      padding: 8px 16px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      white-space: nowrap;
      box-shadow: 0 4px 20px rgba(122,34,48,0.1);
    }
    #no-tooltip.show { opacity: 1; }

    /* === YES CELEBRATION === */
    #yes-overlay {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 200;
      background: radial-gradient(ellipse at 50% 40%, #fce9e1 0%, #f0d4cc 40%, #e0b5a8 100%);
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 40px;
      animation: fadeIn 0.7s ease both;
    }
    #yes-overlay.show { display: flex; }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.96); }
      to   { opacity: 1; transform: scale(1); }
    }
    .yes-hearts {
      font-size: 56px;
      margin-bottom: 24px;
      animation: heartbeat 1.4s ease-in-out infinite;
    }
    .yes-title {
      font-size: clamp(36px, 8vw, 72px);
      font-weight: 300;
      color: var(--dark);
      line-height: 1.1;
      margin-bottom: 16px;
    }
    .yes-title em { color: var(--rose); font-style: italic; }
    .yes-msg {
      font-size: clamp(18px, 3vw, 26px);
      font-style: italic;
      color: var(--deep);
      max-width: 500px;
      line-height: 1.7;
      margin-bottom: 36px;
    }
    .yes-ornament {
      font-family: 'Tenor Sans', sans-serif;
      font-size: 11px;
      letter-spacing: 5px;
      text-transform: uppercase;
      color: var(--gold);
    }

    @media (max-width: 600px) {
      .letter-card { padding: 36px 28px; }
      .reasons-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<canvas id="petal-canvas"></canvas>

<!-- ENVELOPE INTRO -->
<div id="envelope-scene" onclick="openEnvelope()">
  <div class="envelope-wrap">
    <div class="envelope-body">
      <div class="envelope-flap"></div>
      <div class="envelope-bottom-left"></div>
      <div class="envelope-bottom-right"></div>
      <div class="envelope-seal">‚ô•</div>
    </div>
  </div>
  <p class="open-hint">Tap to open</p>
</div>

<!-- MAIN PAGE -->
<div id="main">

  <!-- HERO -->
  <section class="hero">
    <p class="hero-date">February 14 ¬∑ Valentine's Day</p>
    <h1 class="hero-title">To the one<br>who is my <em>everything</em></h1>
    <p class="hero-subtitle">A small letter from the biggest corner of my heart</p>
    <div class="hero-ornament ornament">‚ô•</div>
  </section>

  <!-- LETTER -->
  <section class="letter-section">
    <p class="section-label">A letter for you</p>
    <div class="letter-card">
      <p>My love / Mrs. Roka,</p>
      <p>
        Every morning I wake up beside you, I am reminded of how lucky I am ‚Äî not just to love you, but to be loved by you in return. You make ordinary days feel like poetry, and the extraordinary ones feel like home.
      </p>
      <p>
        You have this rare gift of making everyone around you feel seen, warm, and cherished. It is one of a thousand things about you that takes my breath away.
      </p>
      <p>
        On this Valentine's Day, I want you to know: I would choose you again and again and again ‚Äî in every life, in every version of this world, in every moment where it matters.
      </p>
      <p>Yours ‚Äî always and completely,</p>
      <div class="letter-signature">Your Love / Mr. Roka üíï</div>
    </div>
  </section>

  <div class="divider">‚ú¶ ‚ú¶ ‚ú¶</div>

  <!-- REASONS 
  <section class="reasons-section">
    <p class="section-label" style="text-align:center;">Reasons I love you</p>
    <div class="reasons-grid">
      <div class="reason-card">
        <div class="reason-number">I</div>
        <p class="reason-text">The way your eyes light up when you talk about things you love.</p>
      </div>
      <div class="reason-card">
        <div class="reason-number">II</div>
        <p class="reason-text">How you make every space feel warmer simply by being in it.</p>
      </div>
      <div class="reason-card">
        <div class="reason-number">III</div>
        <p class="reason-text">Your laugh ‚Äî the real one, the one you can't contain.</p>
      </div>
      <div class="reason-card">
        <div class="reason-number">IV</div>
        <p class="reason-text">The way you love so deeply, so honestly, without holding back.</p>
      </div>
      <div class="reason-card">
        <div class="reason-number">V</div>
        <p class="reason-text">How you are my calm in every storm, and my joy in every calm.</p>
      </div>
      <div class="reason-card">
        <div class="reason-number">VI</div>
        <p class="reason-text">Simply ‚Äî you. All of you. Every single day.</p>
      </div>
    </div>
  </section>

  <div class="divider">‚ú¶ ‚ú¶ ‚ú¶</div>

   VALENTINE QUESTION -->
  <section class="valentine-section">
    <h2 class="valentine-question">Will you be my <em>Valentine?</em></h2>
    <p class="valentine-sub">The most important question of the day</p>
    <div class="btn-group" id="btn-group">
      <button class="btn-yes" onclick="sayYes()">Yes, of course!</button>
    </div>
  </section>
  <!-- No button lives outside flow so it can roam the full screen -->
  <button class="btn-no" id="btn-no">No</button>
  <div id="no-tooltip">Nice try! üòè</div>

  <div class="divider">‚ú¶ ‚ú¶ ‚ú¶</div>

  <!-- CLOSING -->
  <section class="closing-section">
    <div class="big-heart">‚ô•</div>
    <p class="closing-text">
      Happy Valentine's Day,<br>my love.
    </p>
    <p class="closing-sub">Forever &amp; always</p>
  </section>

</div>

<!-- YES CELEBRATION OVERLAY -->
<div id="yes-overlay">
  <div class="yes-hearts">üíï üåπ üíï</div>
  <h2 class="yes-title">I knew it!<br><em>You said yes!</em></h2>
  <p class="yes-msg">You've just made me the happiest person in the world. I love you more than words could ever say.</p>
  <p class="yes-ornament">‚ô• &nbsp; Forever yours &nbsp; ‚ô•</p>
</div>

<script>
  /* =============================================
     NO BUTTON ‚Äî proximity escape logic
     Flees when cursor gets within 90px, works on
     both desktop (mousemove) and mobile (touch)
  ============================================= */
  const noBtn = document.getElementById('btn-no');
  const tooltip = document.getElementById('no-tooltip');
  const FLEE_RADIUS = 90;
  const BTN_W = 120, BTN_H = 48;
  let noX, noY;
  let tooltipTimer;
  let escapeTries = 0;

  const taunts = [
    "Nice try! üòè",
    "Nope! üèÉ‚Äç‚ôÄÔ∏è",
    "Not a chance! üí®",
    "Too slow! üòÑ",
    "Catch me if you can!",
    "The answer is YES! üíï",
    "Keep trying! üòÇ",
    "I'm too fast! üåπ",
  ];

  function placeNoBtn() {
    // Start next to the YES button area
    const sec = document.getElementById('btn-group');
    const r = sec.getBoundingClientRect();
    noX = r.right + 40;
    noY = r.top + (r.height - BTN_H) / 2 + window.scrollY;
    // Convert to viewport for fixed positioning
    noX = Math.min(noX, window.innerWidth - BTN_W - 20);
    noY = r.top + (r.height - BTN_H) / 2;
    noY = Math.max(20, Math.min(noY, window.innerHeight - BTN_H - 20));
    applyPos(noX, noY, false);
  }

  function applyPos(x, y, animate) {
    noBtn.style.transition = animate
      ? 'left 0.13s cubic-bezier(0.25,0.46,0.45,0.94), top 0.13s cubic-bezier(0.25,0.46,0.45,0.94)'
      : 'none';
    noBtn.style.left = x + 'px';
    noBtn.style.top  = y + 'px';
    noX = x; noY = y;
  }

  function flee(cursorX, cursorY) {
    const btnCX = noX + BTN_W / 2;
    const btnCY = noY + BTN_H / 2;
    const dx = btnCX - cursorX;
    const dy = btnCY - cursorY;
    const dist = Math.sqrt(dx * dx + dy * dy);

    if (dist < FLEE_RADIUS) {
      escapeTries++;
      // Direction away from cursor
      const angle = Math.atan2(dy, dx);
      const speed = 160 + Math.random() * 80;
      let nx = noX + Math.cos(angle) * speed;
      let ny = noY + Math.sin(angle) * speed;

      // Keep within viewport
      nx = Math.max(10, Math.min(window.innerWidth  - BTN_W  - 10, nx));
      ny = Math.max(10, Math.min(window.innerHeight - BTN_H - 10, ny));

      // Randomise a bit so it doesn't get cornered
      nx += (Math.random() - 0.5) * 80;
      ny += (Math.random() - 0.5) * 80;
      nx = Math.max(10, Math.min(window.innerWidth  - BTN_W  - 10, nx));
      ny = Math.max(10, Math.min(window.innerHeight - BTN_H - 10, ny));

      applyPos(nx, ny, true);

      // Show a sassy taunt tooltip near cursor
      clearTimeout(tooltipTimer);
      const taunt = taunts[escapeTries % taunts.length];
      tooltip.textContent = taunt;
      tooltip.style.left = Math.min(cursorX + 16, window.innerWidth - 200) + 'px';
      tooltip.style.top  = Math.max(cursorY - 40, 10) + 'px';
      tooltip.classList.add('show');
      tooltipTimer = setTimeout(() => tooltip.classList.remove('show'), 900);
    }
  }

  // Desktop: track mouse in real time
  document.addEventListener('mousemove', e => {
    flee(e.clientX, e.clientY);
  });

  // Mobile: track touch
  document.addEventListener('touchmove', e => {
    const t = e.touches[0];
    flee(t.clientX, t.clientY);
  }, { passive: true });

  document.addEventListener('touchstart', e => {
    const t = e.touches[0];
    flee(t.clientX, t.clientY);
  }, { passive: true });

  // Position No button after page is visible
  function initNoBtn() {
    placeNoBtn();
  }

  /* =============================================
     YES button
  ============================================= */
  function sayYes() {
    const overlay = document.getElementById('yes-overlay');
    overlay.classList.add('show');
    noBtn.style.display = 'none';
    tooltip.style.display = 'none';
    for (let i = 0; i < 40; i++) {
      setTimeout(() => petals.push(createPetal()), i * 55);
    }
  }

  /* =============================================
     ENVELOPE
  ============================================= */
  function openEnvelope() {
    const scene = document.getElementById('envelope-scene');
    const main  = document.getElementById('main');
    scene.classList.add('hidden');
    setTimeout(() => {
      scene.style.display = 'none';
      main.classList.add('visible');
      startPetals();
      setTimeout(initNoBtn, 600);
    }, 950);
  }

  /* =============================================
     FALLING PETAL ANIMATION
  ============================================= */
  const canvas = document.getElementById('petal-canvas');
  const ctx = canvas.getContext('2d');
  let petals = [];
  let animRunning = false;

  function resize() {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', () => { resize(); placeNoBtn && placeNoBtn(); });
  resize();

  function randomBetween(a, b) { return a + Math.random() * (b - a); }

  function createPetal() {
    return {
      x:        randomBetween(0, canvas.width),
      y:        randomBetween(-80, -10),
      size:     randomBetween(6, 14),
      speedY:   randomBetween(0.6, 1.8),
      speedX:   randomBetween(-0.4, 0.4),
      rotation: randomBetween(0, Math.PI * 2),
      rotSpeed: randomBetween(-0.02, 0.02),
      opacity:  randomBetween(0.35, 0.8),
      hue:      randomBetween(340, 360),
    };
  }

  function drawPetal(p) {
    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.rotation);
    ctx.globalAlpha = p.opacity;
    ctx.beginPath();
    ctx.ellipse(0, 0, p.size * 0.55, p.size, 0, 0, Math.PI * 2);
    const grad = ctx.createRadialGradient(0, -p.size * 0.3, 0, 0, 0, p.size);
    grad.addColorStop(0, `hsl(${p.hue}, 72%, 80%)`);
    grad.addColorStop(1, `hsl(${p.hue}, 60%, 62%)`);
    ctx.fillStyle = grad;
    ctx.fill();
    ctx.restore();
  }

  function animate() {
    if (!animRunning) return;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (petals.length < 55 && Math.random() < 0.25) petals.push(createPetal());
    petals.forEach(p => {
      p.y += p.speedY;
      p.x += p.speedX + Math.sin(p.y * 0.02) * 0.4;
      p.rotation += p.rotSpeed;
      drawPetal(p);
    });
    petals = petals.filter(p => p.y < canvas.height + 40);
    requestAnimationFrame(animate);
  }

  function startPetals() {
    animRunning = true;
    animate();
  }
</script>
</body>
</html>
